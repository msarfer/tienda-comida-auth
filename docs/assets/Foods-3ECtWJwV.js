import{r,u as f,j as e,t as S,a as v,l as N,b}from"./index-C1lY5CLh.js";function C({food:n}){const[s,l]=r.useState(1),[t,o]=r.useState(""),[i,d]=r.useState(""),[x,p]=r.useState(!1),[j,c]=r.useState(!1),u=f(),h=r.useMemo(()=>s*n.price,[s]),m=async()=>{if(!t||!i||!s)return;const a={name:t,phone:i,article:n.name,quantity:s,price:h};n.quantity-s<0?alert("No hay existencias del producto"):(c(!0),v(a).then(()=>{c(!1)}).then(()=>{const g=n.id,y=n.quantity-s;N(g,y),p(!0)}).then(()=>{o(""),d(""),l(1),u(b())}).finally(()=>{c(!1)}))};return e.jsxs("article",{children:[e.jsxs("header",{children:[e.jsxs("h2",{children:[n.name," - ",n.desc]}),e.jsx("h4",{children:h}),e.jsx("label",{htmlFor:"quantity",children:" Cantidad"}),e.jsx("input",{type:"number",id:"quantity",value:s,onChange:a=>l(Number(a.target.value))})]}),e.jsx("input",{type:"text",value:t,placeholder:"Tu nombre",onChange:a=>o(a.target.value)}),e.jsx("input",{type:"text",value:i,placeholder:"Tu número de teléfono",onChange:a=>d(a.target.value)}),e.jsxs("section",{role:"group",children:[e.jsx("button",{onClick:m,children:"Enviar producto"}),e.jsx("button",{onClick:()=>u(S()),children:"Volver al menú"})]}),x&&e.jsx("span",{style:{color:"green"},children:"Pedido enviado. Recibirá un SMS una vez esté listo para recoger"}),j&&e.jsx("span",{style:{color:"green"},children:"Procesando pedido."})]})}function P({items:n}){const[s,l]=r.useState();return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"ulFoods",children:n.map(t=>e.jsxs("article",{className:"liFoods",onClick:()=>l(t),children:[e.jsx("header",{children:e.jsx("img",{className:"foodImg",src:`/tienda-comida-auth/images/${t.image}`,alt:t.name,style:{height:"100px"}})}),e.jsxs("div",{className:"foodItem",children:[e.jsx("p",{className:"foodDesc",children:t.desc}),e.jsxs("p",{className:"foodPrice",children:[t.price,"$"]})]}),e.jsx("footer",{children:(s==null?void 0:s.id)===t.id&&e.jsx(C,{food:s})})]},t.id))})})}export{P as default};
