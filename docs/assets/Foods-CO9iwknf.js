import{r,u as v,a as S,j as e,b as N,l as b,c as C}from"./index-B2-kE1s8.js";function F({food:n}){const[s,i]=r.useState(1),[t,o]=r.useState(""),[c,d]=r.useState(""),[h,x]=r.useState(!1),[p,l]=r.useState(!1),j=v(),m=S(),u=r.useMemo(()=>s*n.price,[s]),g=async()=>{if(!t||!c||!s||s<=0)return;const a={name:t,phone:c,article:n.name,quantity:s,price:u};n.quantity-s<0?alert("No hay existencias del producto"):(l(!0),N(a).then(()=>{l(!1)}).then(()=>{const y=n.id,f=n.quantity-s;b(y,f),x(!0)}).then(()=>{o(""),d(""),i(1),m(C())}).finally(()=>{l(!1)}))};return e.jsxs("article",{children:[e.jsxs("header",{children:[e.jsxs("h2",{children:[n.name," - ",n.desc]}),e.jsx("h4",{children:u}),e.jsx("label",{htmlFor:"quantity",children:" Cantidad"}),e.jsx("input",{type:"number",id:"quantity",value:s,onChange:a=>i(Number(a.target.value)),min:0})]}),e.jsx("input",{type:"text",value:t,placeholder:"Tu nombre",onChange:a=>o(a.target.value)}),e.jsx("input",{type:"text",value:c,placeholder:"Tu número de teléfono",onChange:a=>d(a.target.value)}),e.jsxs("section",{role:"group",children:[e.jsx("button",{onClick:g,children:"Enviar producto"}),e.jsx("button",{onClick:()=>j("/"),children:"Volver al home"})]}),h&&e.jsx("span",{style:{color:"green"},children:"Pedido enviado. Recibirá un SMS una vez esté listo para recoger"}),p&&e.jsx("span",{style:{color:"green"},children:"Procesando pedido."})]})}function I({items:n}){const[s,i]=r.useState();return e.jsx(e.Fragment,{children:e.jsx("ul",{className:"ulFoods",children:n.map(t=>e.jsxs("article",{className:"liFoods",onClick:()=>i(t),children:[e.jsx("header",{children:e.jsx("img",{className:"foodImg",src:`/tienda-comida-auth/images/${t.image}`,alt:t.name,style:{height:"100px"}})}),e.jsxs("div",{className:"foodItem",children:[e.jsx("p",{className:"foodDesc",children:t.desc}),e.jsxs("p",{className:"foodPrice",children:[t.price,"$"]})]}),e.jsx("footer",{children:(s==null?void 0:s.id)===t.id&&e.jsx(F,{food:s})})]},t.id))})})}export{I as default};
